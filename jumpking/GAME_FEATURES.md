# Jump King 遊戲功能更新說明

## 🎵 音效系統

### 跳躍音效

- 玩家每次跳躍時會播放 `sound/jump.mp3` 音效
- 音效只在成功跳躍時播放（在地面上且蓄力完成）

### 🏆 通關音效

- 玩家完成關卡時會播放 `sound/golfclap.mp3` 音效
- 在關卡完成的瞬間自動播放，增加成就感

### 🎮 音效控制

- **M 鍵**: 切換音效開關（開啟/關閉）
- **+ 鍵 (或數字鍵盤+)**: 提高音量
- **- 鍵 (或數字鍵盤-)**: 降低音量
- 音量範圍: 0% - 100%
- 預設音量: 70%

## 💀 遊戲失敗機制

### 失敗條件

- 當玩家死亡次數超過關卡目標死亡次數時，遊戲會觸發失敗
- 每個關卡都有不同的目標死亡次數（顯示在遊戲畫面左上角）

### 失敗畫面

- 顯示深紅色背景的失敗畫面
- 顯示當前關卡資訊、死亡次數對比和超過目標的次數
- 提供鼓勵文字：「不要放棄！再試一次！」

### 失敗後選項

- **Enter 或 Space 鍵**: 重新開始當前關卡（死亡次數重置為 0）
- **ESC 鍵**: 返回主選單

### 重新開始機制

- 重新開始時，玩家會回到關卡起點
- 死亡次數重置為 0，給玩家全新的機會
- 關卡進度和解鎖狀態保持不變

## 🎯 技術實現

### 音效系統

- 使用 pygame.mixer 音效系統
- 支援 MP3 格式音效文件
- 自動載入 `sound/jump.mp3` 和 `sound/golfclap.mp3` 文件
- 包含錯誤處理，音效載入失敗不會影響遊戲運行
- 所有音效共享相同的音量設置

### 失敗機制

- 在每次死亡後自動檢查死亡次數
- 使用 GAME_OVER 遊戲狀態管理失敗畫面
- 提供完整的事件處理和畫面繪製

## 🎮 遊戲流程

1. **開始遊戲** - 選擇關卡開始挑戰
2. **遊戲進行** - 控制角色跳躍，每次跳躍播放音效
3. **死亡處理** - 死亡時檢查是否超過目標次數
4. **成功完成** - 到達目標時播放通關音效，進入勝利畫面
5. **失敗處理** - 超過目標死亡次數時進入失敗畫面
6. **重新挑戰** - 在失敗畫面可選擇重新開始或返回選單

## 🎯 各關卡目標死亡次數

- 第 1 關（初學者之路）: 5 次
- 第 2 關（小心陷阱）: 8 次
- 第 3 關（精確控制）: 12 次
- 第 4 關（危險跳躍）: 15 次
- 第 5 關（中級試煉）: 20 次
- 第 6 關（進階挑戰）: 35 次
- 第 7 關（簡單練習）: 8 次
- 第 8 關（輕鬆練習）: 5 次
- 第 9 關（螺旋迷宮）: 80 次
- 第 10 關（終極挑戰）: 120 次
- 第 11 關（天堂之塔）: 200 次
- 第 12 關（無限之塔）: 500 次

## 📝 控制說明

### 遊戲中

- **SPACE**: 按住蓄力，放開跳躍
- **← →**: 選擇跳躍方向
- **R**: 重置位置
- **M**: 切換音效
- **+ -**: 調整音量
- **ESC**: 返回選單
- **F11**: 切換全屏

### 失敗畫面

- **Enter/Space**: 重新開始當前關卡
- **ESC**: 返回主選單
- **F11**: 切換全屏

## ✅ 測試

### 音效測試

- `test_sound.py` - 測試跳躍音效
- `test_victory_sound.py` - 測試通關音效

### 失敗機制測試

- `test_game_over.py` - 測試遊戲失敗機制

運行測試指令：

```bash
python test_sound.py
python test_victory_sound.py
python test_game_over.py
```

## 🔧 設置

- 音效設置會保存在遊戲會話中
- 重新啟動遊戲時會恢復預設設置
- 失敗不會影響關卡解鎖進度

## 📁 音效文件

- 跳躍音效: `sound/jump.mp3`
- 通關音效: `sound/golfclap.mp3`
- 格式: MP3
- 建議: 跳躍音效短促（1-2 秒），通關音效可以較長（3-5 秒）
